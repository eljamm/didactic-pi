{% load static %}
{% load range_iterator %}
{% load reusable_blocks %}

<link rel="stylesheet" href="{% static 'sensor/css/leds.css' %}">

<!-- Wiring -->
{% sub_header "tool.svg" "Wiring Schematic" "wiring" %}

<div class="d-flex justify-content-center align-items-center flex-column">
    <img class="img-wiring" src="{% static 'sensor/images/wiring/ledarray.svg' %}" alt="LED Array Wiring">
    <img class="img-table" src="{% static 'sensor/images/wiring/ledarray_pins.svg' %}" alt="LED Array Pins">
</div>

<!-- Interface -->
{% sub_header "sliders.svg" "Control Panel" "control" %}

<div class="accordion" id="accordionInfo" style="padding: var(--accordion-padding);">
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingOne">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
                aria-expanded="true" aria-controls="collapseOne">
                <strong>How To Use ?</strong>
            </button>
        </h2>
        <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne"
            data-bs-parent="#accordionInfo">
            <div class="accordion-body">
                <ul>
                    <li>
                        <h5 class="card-title">Send Data</h5>
                        <p class="card-text">
                            Click on a LED to switch its state between <strong>on</strong>, <strong>blinking</strong>
                            and <strong>off</strong>
                            then click the <u><strong>send</strong></u> button to display the pattern on the LED matrix.
                        </p>
                    </li><br>
                    <li>
                        <h5 class="card-title">Clear LEDs</h5>
                        <p>
                            After clicking the <u><strong>clear</strong></u> button you can either click
                            <u><strong>send</strong></u> to clear the LED matrix or redraw the shape you
                            want before sending it.
                        </p>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

{% iterate_over 2 as range_x %}
{% iterate_over 10 as range_y %}
<div class="text-center">
    <div class="gauge-box" style="flex-direction: row; margin: var(--gauge-box-margin-2);">
        {% for i in range_x %}
        <div class="led-container" style="margin: var(--led-container-margin);">
            <div>
                {% for j in range_y %}
                <div class="led-box">
                    <div {% if i == 0 %} class="led-blue-inactive" {% else %} class="led-red-inactive" {% endif %}
                        id="led-{{i}}-{{j}}" onclick="location.href='javascript:flipLED(\'led-{{i}}-{{j}}\')';"></div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div>
    <div class="btn-container" style="margin-bottom: 5%; padding-top: 0%;">
        <button type="button" class="btn btn-success btn-data" id="send-data">Send</button>
        <button type="button" class="btn btn-dark btn-data" id="clear-data">Clear</button>
    </div>
</div>

<script src="{% static 'sensor/js/utils/ledutils.js' %}"></script>
<script src="{% static 'sensor/js/sensors/ledarray.js' %}"></script>